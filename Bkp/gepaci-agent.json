{
  "name": "gepaci-agent",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini-2024-07-18",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini-2024-07-18"
        },
        "options": {
          "temperature": 0.7
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2720,
        1344
      ],
      "id": "1cfe5519-3c47-4768-bd10-e5e25a5ad5fc",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "HIV493e91Mlq2ZRT",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "MCP Base de Conhecimento",
        "height": 1360,
        "width": 2608
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        6496,
        -144
      ],
      "typeVersion": 1,
      "id": "9114f8ea-45f9-4d83-b8bd-f460baf3e45d",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "Tools e Memory",
        "height": 352,
        "width": 736,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2464,
        1232
      ],
      "typeVersion": 1,
      "id": "d115af5c-4b64-4c25-ae5a-1f1755032ef3",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1HNAmTNpx4e15DZ-gvlbBQV_A8oaqwL5H_xUM6KSjyFM/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        8272,
        816
      ],
      "id": "caf3bf78-c9f6-4578-8545-dfd82e41964c",
      "name": "Parcerias",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1hdYI0yfeAwRmjj8uQlCoYZ_hSqzwjXtlNX7sJInSkHA/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        8624,
        816
      ],
      "id": "17d70e8b-bd86-4cff-a382-52bd1b967915",
      "name": "Seguro de Vida",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1H-m8Vhblam5nDLuW4sKbOGNqnD0yMMP2obqv_E4Ab0o/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        7648,
        816
      ],
      "id": "c95f5ad5-623a-4174-aeae-08d1a62c3109",
      "name": "Folha de Pagamento",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.4
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2528,
        1392
      ],
      "id": "d1b61362-bd8e-4c6a-a021-d7b6ba4df48e",
      "name": "Google Gemini Chat Atendimento",
      "credentials": {
        "googlePalmApi": {
          "id": "oGRdmFIGj3kd3Pmo",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "content": "Tools e Memory",
        "height": 1168,
        "width": 1216,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2224,
        0
      ],
      "typeVersion": 1,
      "id": "37cb17f1-a86c-435f-b5c6-07f8964a7b01",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/10mk4v5ob161CAuhvGSupQ_p02Srk2E_vDbLKyQ7tRR8/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        6992,
        800
      ],
      "id": "e53ea7a2-4583-482f-a0b9-034a65d0a0cf",
      "name": "Auxilio Creche",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1S3i3ga2An7MtcdvEJCN9lZdBa3KemYGSBxsA3YaE1H4/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        6720,
        800
      ],
      "id": "22998a7c-7e1d-46ee-aa59-b44432b8e094",
      "name": "Admissao",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1q6jHdpIA5I7mQtpQeYgf6_HB_sLsxPNg5v2x3xYoX1I/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        7328,
        800
      ],
      "id": "0e095d35-f08e-4e0f-8c4e-edc623e66869",
      "name": "Convenio Medico",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1aif4A-BsZ8wuv5T2bLKWG6iON5Nmvl8SZ6Z91pMfRBk/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        7968,
        816
      ],
      "id": "571eb52a-0ce5-4444-aaa5-1b538d89ba16",
      "name": "Frequencia",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "https://docs.google.com/document/d/1NeUZdzUBsGeMqcnU04ceGj-Z_93fkVE5DR5vx0jzkZM/edit?usp=sharing"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        8960,
        800
      ],
      "id": "0d3686be-363b-4c7b-abcb-19213f388903",
      "name": "Vale Transporte",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "qyHO2kMTuKnaY79N",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "path": "8ffcb6c1-c5d4-4c3c-b0f2-26e844222cd2"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        7408,
        128
      ],
      "id": "edfa2247-6894-4350-994d-2dde21e10140",
      "name": "MCP Base de Conhecimento",
      "webhookId": "8ffcb6c1-c5d4-4c3c-b0f2-26e844222cd2",
      "alwaysOutputData": false,
      "notesInFlow": false
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagemAtual }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "**INSTRUÇÕES PARA COLETA DE IDENTIFICAÇAO DA AGENTE \"Gê\"**\n\nVocê é a **Gê**, atendente virtual do **Gepaci**. Sua função nessa etapa será somente solicitar, coletar e validar se a informação passada pelo usuário é uma matricula/RE (contendo 6 dígitos) ou um CPF (contendo no máximo 11 dígitos)\n\n\n### 1. **Estilo de Atendimento**\n\n* Seja sempre **educada**, **objetiva**, **compreensiva** e **empática**.\n* Mantenha um tom **humanizado e acolhedor**.\n* Faça **apenas uma pergunta por vez**. Nunca sobrecarregue o cliente com múltiplas perguntas simultâneas.\n* **Nunca utilize informações externas** as orientações desse script\n\n### 2. **Início da Conversa**\n\n1. Apresente-se de forma simpática como Gê, atendente virtual do Gepaci.\n2. Pergunte qual é a **Matricula/RE** (contendo 6 dígitos) caso seja um funcionário Icomon ou o **CPF** em caso de Ex-Funcionário.\n3. Valide se a informação passada possui o número de dígitos informado. Caso positivo, passe para o proximo nó.\n4. Se a informação passada não atender aos requisitos, solicite os dados novamente.\n\n⚠️ *Aguarde a resposta de cada pergunta antes de seguir para a próxima.*\n\n### 3. **Encerramento da Conversa**\n\nSe o colaborados não for localizado após duas tentativas ou se o mesmo informar que não é um funcionário ou ex-funcionário, finalize a conversa chamando o Agent Tool **AI Nao Localizado**\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2640,
        96
      ],
      "id": "de3f9608-3922-477d-be4b-cf8e16ef2bd1",
      "name": "Validar Usuario",
      "notesInFlow": false,
      "alwaysOutputData": false,
      "executeOnce": false
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Coletar Mensagem Atendimento').item.json.mensagemAtual }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "=**INSTRUÇÕES GERAIS PARA O AGENTE \"Gê\"**\n\nVocê é a **Gê**, atendente virtual do **Gepaci**, especializada em fornecer informações sobre os processos de gestão de pessoas.\n\n### 1. **Estilo de Atendimento**\n\n* Seja sempre **educada**, **objetiva**, **compreensiva** e **empática**.\n* Chame o usuário apenas pelo primeiro nome, se necessário.\n* Mantenha um tom **humanizado e acolhedor**.\n* Faça **apenas uma pergunta por vez**. Nunca sobrecarregue o cliente com múltiplas perguntas simultâneas.\n* **Nunca utilize informações externas** ao conteúdo da **Tool Banco Verorial** aplicada na Tools.\n\n### 2. **Início da Conversa**\n\n1. Inicie a conversa chamando o usuário pela primeira parte do nome **{{ $json.nomeUsuario }}** pergunte em que pode ajudar.\n2. Nesse ponto você não precisa solicitar os dados do usuário. Todos eles já foram coletados no banco de dados e podem ser utilizados na conversa, caso necessário.\n3. ATENÇÃO: Utilize sempre mensagens curtas (de no máximo 3 linhas) para que o usuário possa acompanhar o dialogo como uma conversa normal com um humano.\n4. Se o assunto solicitado pelo usuário tiver mais tópicos e a pergunta foi muito abrangente, tente sondar quais informações o usuário precisa para que seja mais preciso na resposta. \n5. Nunca envie a documentação inteira para o usuário. Somente os pontos solicitados.\n6. Não repita informações já passadas. Apenas complemente as informações.\n\n⚠️ *Aguarde a resposta de cada pergunta antes de seguir para a próxima.*\n\n### 3. **Uso da Base de Conhecimento**\n\n* Utilize as respostas fornecidas pelo cliente para consultar a **Tool Banco Verorial**.\n* Com base nessas informações, apresente **soluções** relevantes os questionamentos ou dúvidas do usuário.\n* Você deve apresentar somente as informações relevantes a solicitação do cliente. Exemplo: \"Informação sobre Ingressos Cinemark\". Você deve somente as informações referentes a esse benefício.\n* Seja **objetiva**, mas mantenha o foco no que for útil e aplicável.\n* **Nunca ofereça nada fora da Tool Banco Verorial**.\n\n  > Caso o cliente solicite algo fora da base, **peça desculpas** e pergunte se deseja falar com um especialista.\n  > Se insistir, explique gentilmente a limitação e, se necessário, **encerre educadamente a conversa**.\n\n### 4. **Sobre o Funcionamento de Agentes de IA**\n\n* Se questionada sobre como funciona um Agentes de IA, explique que **você é um exemplo real**, treinado com informações do **Gepaci**, e capaz de atender de forma automatizada e inteligente.\n\n### 5. **Validação da Relevância**\n\nApós apresentar as soluções:\n\n1. Pergunte se as informações foram **úteis e se o usuário precisa de mais alguma ajuda**.\n\n   * Se **não**, pergunte o **motivo** e tente complementar com base na dúvida.\n   * Se **sim**, vá para o tópico **### 7**.\n\n### 6. **Cases de Sucesso**\n\n* Utilize os exemplos disponíveis na **Tool Banco Verorial**.\n* **Jamais divulgue nomes de clientes**, respeitando a **confidencialidade**.\n\n### 7. **Encerramento do Atendimento**\n\n* Agradeça e encerre o atendimento cordialmente.\n\n### 8. **Uso do Bloco `<Tool Banco Verorial>`**\n\nSempre que precisar fornecer informações, **consulte apenas este bloco**.\nSe a informação não estiver presente, **não invente**."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2640,
        496
      ],
      "id": "c60593fd-4d71-4623-967e-6683f8bbb20c",
      "name": "Atendimento",
      "notesInFlow": false,
      "alwaysOutputData": false,
      "executeOnce": false
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9efad99d-7bde-414c-af1a-637e4d123fb5",
              "name": "inputIdentity",
              "value": "={{ $('Tratar somente Numeros').item.json.messageOnlyNumbers }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1536,
        64
      ],
      "id": "2b2c80d6-2392-45d7-a8f7-18be5ba4879a",
      "name": "coletar identificador",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/webhook/db-contas",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "json.phoneNumber",
              "value": "={{ $('coletar dados da conversa').item.json.phoneNumber }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        288,
        496
      ],
      "id": "d130a352-e2c8-464d-a9ab-d06feb757ab2",
      "name": "Sql Agtesla",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9efad99d-7bde-414c-af1a-637e4d123fb5",
              "name": "dadosCliente.Nome",
              "value": "={{ $('Sql Agtesla').item.json.body.NOME_SCL }}",
              "type": "string"
            },
            {
              "id": "b4057371-72ff-4f0b-8cea-80002b90a3a2",
              "name": "dadosCliente.Re",
              "value": "={{ $('Sql Agtesla').item.json.body.RE_SCL }}",
              "type": "string"
            },
            {
              "id": "97d8db74-5db5-4924-b230-20718dc5805b",
              "name": "dadosCliente.Status",
              "value": "={{ $('Sql Agtesla').item.json.body.STATUS_SCL }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        128,
        768
      ],
      "id": "aec2052a-2e61-4928-ab3a-18c969e424e9",
      "name": "coletar dados usuario",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ec732077-a790-418b-a4f4-7fceeef216e2",
              "leftValue": "={{ $json.messageOnlyNumbers }}",
              "rightValue": "^[0-9]{6}$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            },
            {
              "id": "60536cd9-5339-4560-a516-39d523053786",
              "leftValue": "={{ $json.messageOnlyNumbers }}",
              "rightValue": "^[0-9]{11}$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1280,
        80
      ],
      "id": "8703ea24-fae3-4943-b1ca-c037df784a46",
      "name": "If"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "whatswebhook",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        80,
        32
      ],
      "id": "78b3644e-b490-4a61-8af9-efa209ea77ce",
      "name": "Webhook",
      "webhookId": "f64d0604-db70-4a3f-8315-9a9719001fb7"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        3008,
        1408
      ],
      "id": "3ba12f01-7c85-4d12-b5a6-19f2e07dc116",
      "name": "Think"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1D8sj-baVT_5r23gWXNl68DinUOqsAlk1HvmahMWOiaQ/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Página1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1D8sj-baVT_5r23gWXNl68DinUOqsAlk1HvmahMWOiaQ/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "LINHA_GENESIS",
              "lookupValue": "={{ $('Tratar número').item.json.foneTratado }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -256,
        528
      ],
      "id": "84d4b1d7-1dce-43e0-9e14-1a3484c7741c",
      "name": "db_contas",
      "retryOnFail": false,
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "O86pRStIuX57Bh6F",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "21b073af-b386-45de-bc4b-6cbf2e2aee20",
              "leftValue": "={{ $json.statusAtendimento }}",
              "rightValue": "=",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        848,
        240
      ],
      "id": "8d0d89ed-8c1d-4c17-a9e7-48a029c5caef",
      "name": "If2",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b60e9583-6fe9-45ff-ac2f-aadaaa27c51f",
              "name": "session",
              "value": "={{ $('Webhook').item.json.body.session }}",
              "type": "string"
            },
            {
              "id": "1f37ee26-a963-497c-b693-a14afd0bdff1",
              "name": "chatId",
              "value": "={{ $('Webhook').item.json.body.chatId }}",
              "type": "string"
            },
            {
              "id": "01a74efd-5d4e-4869-b157-8611c12facf8",
              "name": "pushName",
              "value": "={{ $('Webhook').item.json.body.pushName }}",
              "type": "string"
            },
            {
              "id": "ee194e95-3390-43ba-8f4c-e5ad1054b4d6",
              "name": "payload_id",
              "value": "={{ $('Webhook').item.json.body.payload_id }}",
              "type": "string"
            },
            {
              "id": "36b91569-2721-46ab-b458-6c2c00c1f659",
              "name": "event",
              "value": "={{ $('Webhook').item.json.body.event }}",
              "type": "string"
            },
            {
              "id": "384c4862-3a8c-4c1f-a28f-2dad32b1fb75",
              "name": "fromMe",
              "value": "={{ $('Webhook').item.json.body.fromMe }}",
              "type": "string"
            },
            {
              "id": "6c3fee67-5a3e-4daf-b7e0-8a987bf24dc1",
              "name": "message",
              "value": "={{ $('Webhook').item.json.body.message }}",
              "type": "string"
            },
            {
              "id": "c06f028b-6543-451e-ab4c-ef99e6feea7d",
              "name": "phoneNumber",
              "value": "={{ $json.foneTratado }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        464,
        32
      ],
      "id": "ff637e42-0e66-4e1f-8097-c95881c72a19",
      "name": "coletar dados da conversa",
      "executeOnce": true
    },
    {
      "parameters": {
        "content": "Consultar Bando db_contas",
        "height": 592,
        "width": 784
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        432
      ],
      "typeVersion": 1,
      "id": "ff2c1416-3cef-443c-bd9f-36c4cc01cd78",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "21b073af-b386-45de-bc4b-6cbf2e2aee20",
              "leftValue": "={{ $json.body.ID }}",
              "rightValue": 200,
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        496,
        496
      ],
      "id": "2f7762bc-218e-4643-b1c4-0cd6579f5a92",
      "name": "If3",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "\nconst whatsapp = $input.first().json.body.contacts[0].phones[0].phone;\nconst onlyPhone = whatsapp\n  .replace(/\\D/g, '')\n  .replace(/^55/, '');\nconst result = [\n  {\n    foneTratado: onlyPhone\n  }\n];\n\nreturn result;\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        272,
        32
      ],
      "id": "19859430-1c5e-47e7-aa85-887c6407d97b",
      "name": "Tratar número",
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "Inicio",
        "height": 400,
        "width": 784,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1,
      "id": "47e1cb6e-ed09-484d-ad65-3e481a7ceea2",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "Consulta API Funcionarios",
        "height": 768,
        "width": 752
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1440,
        0
      ],
      "typeVersion": 1,
      "id": "a0a6a929-04c2-478d-abc2-47c69bfc8258",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "statusAtendimento",
        "key": "={{ $json.session }}",
        "options": {
          "dotNotation": true
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        272,
        240
      ],
      "id": "3e6c5947-dd4f-4b12-aaa1-713196a59e4d",
      "name": "Consultar Status",
      "alwaysOutputData": false,
      "notesInFlow": false,
      "executeOnce": false,
      "retryOnFail": true,
      "maxTries": 2,
      "waitBetweenTries": 120,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('Webhook').item.json.body.session }}",
        "value": "inicio_conversa",
        "expire": true,
        "ttl": 360
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        80,
        496
      ],
      "id": "f4ccd57c-2201-4134-940e-d941b03f8a6f",
      "name": "Setar Status Inicial",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "statusAtendimento",
        "key": "={{ $('coletar dados da conversa').item.json.session }}",
        "options": {
          "dotNotation": true
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        880,
        560
      ],
      "id": "c7aeef34-6091-472f-8c1b-fc08c7f98f9f",
      "name": "Status direcionamento",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "08f1353f-0d65-46cd-9613-78a2304040d9",
                    "leftValue": "={{ $json.statusAtendimento }}",
                    "rightValue": "inicio_conversa",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "verificar_usuario"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "57b50e12-5a8c-4ef1-b842-05557744c30d",
                    "leftValue": "={{ $json.statusAtendimento }}",
                    "rightValue": "nao_localizado",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "=nao_localizado"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f1eeb533-409f-409b-bebd-b35ca3bb6c54",
                    "leftValue": "={{ $json.statusAtendimento }}",
                    "rightValue": "atendimento",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "atendimento"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f3743f36-1131-45b3-9d33-ced97cbf2c57",
                    "leftValue": "={{ $json.statusAtendimento }}",
                    "rightValue": "acesso_icopass",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "validar_icopass"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3735b938-34a3-4117-9b89-561d09ee2e1b",
                    "leftValue": "={{ $json.statusAtendimento }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notExists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "finalizar"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1120,
        464
      ],
      "id": "852561e2-c0f4-4ea6-8096-38f3ca073d82",
      "name": "Gerenciar direcionamento"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Webhook').item.json.body.session }}_{{ $('Webhook').item.json.body.chatId }}",
        "sessionTTL": 1200,
        "contextWindowLength": 40
      },
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [
        2864,
        1424
      ],
      "id": "ddeb4837-1477-46bc-b1b1-867e7af0aca2",
      "name": "Redis Chat Memory",
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('Webhook').item.json.body.session }}_message",
        "value": "={{ $('Webhook').item.json.body.message }}",
        "expire": true,
        "ttl": 360
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        480,
        240
      ],
      "id": "1004f89f-5817-4f05-b2cf-f44aa9e980f7",
      "name": "Mensagem atual",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "batchSize": 3,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3232,
        352
      ],
      "id": "72096b6b-7e38-4d8f-8df8-1b563447c15a",
      "name": "Loop Over Items"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "name": "Replace Me",
      "typeVersion": 1,
      "position": [
        3488,
        368
      ],
      "id": "89f03713-7a00-42a4-8c5b-bb8b5e48abe4"
    },
    {
      "parameters": {
        "content": "Direcionamentos\n",
        "height": 1024,
        "width": 592,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        816,
        0
      ],
      "typeVersion": 1,
      "id": "09c13244-9ae9-4484-a549-99bea77b5580",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "341efbfa-c910-48de-8435-deda0b23ea41",
              "leftValue": "={{ $('API Identidade').item.json.statusCode }}",
              "rightValue": 200,
              "operator": {
                "type": "number",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1536,
        288
      ],
      "id": "64859877-2444-4e3a-821d-da9cb9da53b0",
      "name": "If1"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('Webhook').item.json.body.session }}",
        "value": "nao_localizado",
        "expire": true,
        "ttl": 360
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        1744,
        272
      ],
      "id": "dd060372-3177-439c-af2d-1319afa30f58",
      "name": "Setar Status Nao Localizado",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('Webhook').item.json.body.session }}",
        "value": "atendimento",
        "expire": true,
        "ttl": 360
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        1968,
        304
      ],
      "id": "c1369551-1f28-4d21-b5c4-20304a9701cc",
      "name": "Setar Status Atendimento",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagemAtual }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "**INSTRUÇÕES PARA COLABORADOR NÃO ENCONTRADO NA BASE**\n\nVocê é a **Gê**, atendente virtual do **Gepaci**. Sua função nessa etapa será para somente para orientar o usuário a entrar em contato com os canais de atendimento adequados.\n\n\n### 1. **Estilo de Atendimento**\n\n* Seja sempre **educada**, **objetiva**, **compreensiva** e **empática**.\n* Mantenha um tom **humanizado e acolhedor**.\n* Faça **apenas uma pergunta por vez**. Nunca sobrecarregue o cliente com múltiplas perguntas simultâneas.\n* **Nunca utilize informações externas** as orientações desse script\n\n### 2. **Início da Conversa**\n\n1. O atendimento já foi iniciado em outro momento e não foi possível localizar o colaborador com os dados informados.\n2. Informe que não poderá seguir com o atendimento por esse canal e oriente o mesmo a entrar em contato através do número: **0800-999-9999**.\n3. Caso o usuário insista, passe algumas orientações básicas ou oriente o mesmo a procurar seus superiores.\n\n⚠️ *Aguarde a resposta de cada pergunta antes de seguir para a próxima.*"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2640,
        288
      ],
      "id": "0585c512-43bb-4f6e-bd1d-aa22ab74cabd",
      "name": "Colaborador Não Encontrado",
      "notesInFlow": false,
      "alwaysOutputData": false,
      "executeOnce": false
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "mensagemAtual",
        "key": "={{ $('Webhook').item.json.body.session }}_message",
        "options": {
          "dotNotation": true
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        2256,
        96
      ],
      "id": "8e80c6d1-4df6-4874-94b7-f9121dd7ca92",
      "name": "Coletar Mensagem Verificacao",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "mensagemAtual",
        "key": "={{ $('Webhook').item.json.body.session }}_message",
        "options": {
          "dotNotation": true
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        2256,
        288
      ],
      "id": "96233dae-a9e7-4458-bdbb-062a8e819164",
      "name": "Coletar Mensagem Nao Encontrado",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "mensagemAtual",
        "key": "={{ $('coletar dados da conversa').item.json.session }}_message",
        "options": {
          "dotNotation": false
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        2240,
        496
      ],
      "id": "e42313c1-a52f-4b8f-8541-71bacf40ace8",
      "name": "Coletar Mensagem Atendimento",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('coletar dados da conversa').item.json.session }}",
        "value": "atendimento",
        "expire": true,
        "ttl": 360
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        528,
        768
      ],
      "id": "d0a39be7-4519-4602-aa7e-21c8f887dbc9",
      "name": "Setar Status Atendimento1",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('coletar dados da conversa').item.json.session }}_nome",
        "value": "={{ $json.dadosCliente.Nome }}",
        "expire": true,
        "ttl": 1000
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        336,
        768
      ],
      "id": "a670ae7e-33ee-4c06-8127-27548624e6e4",
      "name": "Setar Nome",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "86838aef-90b0-4708-9836-ddb8f266462f",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -432,
        1632
      ],
      "id": "69c5715f-447d-4f5f-9c66-bf6ed864c709",
      "name": "Variáveis Redis",
      "webhookId": "86838aef-90b0-4708-9836-ddb8f266462f"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('Webhook').item.json.body.session }}_name",
        "value": "={{ $json.dadosCliente.Nome }}",
        "expire": true,
        "ttl": 1000
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        432,
        1312
      ],
      "id": "6ec8ead9-093e-402b-9d15-b376b971a438",
      "name": "Setar Nome2",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        144,
        1296
      ],
      "id": "97195691-a88a-4d12-8f88-762751f99cac",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -352,
        1392
      ],
      "id": "bcd30e44-5201-4519-b2fb-7ffc24910621",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "jsCode": "return [\n\t{\n\t\tjson: {\n\t\t\t\"nome\": \"Daniel\",\n\t\t}\n\t},\n\t{\n\t\tjson: {\n\t\t\t\"nome\": \"joe\",\n\t\t}\n\t}\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -64,
        1296
      ],
      "id": "f850595c-6adf-4938-ab04-7e4c1523666f",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "VW_LINHAS_GENESIS_SCL",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -256,
        720
      ],
      "id": "d7d19d2f-67ae-4d36-967b-9bdfea6690c5",
      "name": "Get many rows",
      "alwaysOutputData": true,
      "executeOnce": false,
      "retryOnFail": true,
      "maxTries": 2,
      "waitBetweenTries": 60,
      "credentials": {
        "supabaseApi": {
          "id": "htCf539ApNjfrbw8",
          "name": "Supabase account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "nomeUsuario",
        "key": "={{ $('coletar dados da conversa').item.json.session }}_nome",
        "options": {
          "dotNotation": false
        }
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        2448,
        496
      ],
      "id": "2f387d0c-bf46-4797-9407-92ed03977402",
      "name": "Coletar Nome Usuario",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('coletar dados da conversa').item.json.session }}_nome",
        "value": "={{ $json.dadosCliente.Nome }}",
        "expire": true,
        "ttl": 1000
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        1504,
        512
      ],
      "id": "3763890f-2ac5-40a1-8db9-9dfc225a5098",
      "name": "Setar Nome1",
      "alwaysOutputData": false,
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9efad99d-7bde-414c-af1a-637e4d123fb5",
              "name": "dadosCliente.Nome",
              "value": "={{ $json.body.body.nome }}",
              "type": "string"
            },
            {
              "id": "b4057371-72ff-4f0b-8cea-80002b90a3a2",
              "name": "dadosCliente.Re",
              "value": "={{ $('coletar identificador').item.json.inputIdentity }}",
              "type": "string"
            },
            {
              "id": "97d8db74-5db5-4924-b230-20718dc5805b",
              "name": "dadosCliente.Status",
              "value": "={{ $json.body.body.colaborador }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1952,
        64
      ],
      "id": "94ccc482-a866-4bd3-ba35-5291c54e862d",
      "name": "coletar dados usuario1",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        7408,
        496
      ],
      "id": "9a49d4f3-8f9c-4402-b9d8-3e6659183e96",
      "name": "AI Atendimento"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        6736,
        512
      ],
      "id": "8616b1ff-7391-4c11-8a57-ffdae25f703c",
      "name": "Call Auxilio Creche"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        7072,
        512
      ],
      "id": "5ed95652-d7e4-4929-b6ff-7bba2e364951",
      "name": "Call Convenio Medico"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        7696,
        512
      ],
      "id": "39054466-a066-4cb2-9d84-1a33781633f9",
      "name": "AI Frequencia1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        8016,
        512
      ],
      "id": "a8948be8-dd4c-4c61-9fb7-0bf968baf51d",
      "name": "Call Parcerias Beneficios"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        8336,
        512
      ],
      "id": "fd729028-d41a-4128-a2d3-aaf2a71aa576",
      "name": "Call Seguro Vida"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "p1hfguearSVeknq0",
          "mode": "list",
          "cachedResultUrl": "/workflow/p1hfguearSVeknq0",
          "cachedResultName": "gepaci-agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        8656,
        512
      ],
      "id": "dde4335a-07d9-412c-aabb-9791efaad5cc",
      "name": "Call Vale Transporte"
    },
    {
      "parameters": {
        "text": "**INSTRUÇÕES PARA NÃO ENCONTRADO NA BASE OU NÃO FUNCIONÁRIO**\n\nVocê é a **Gê**, atendente virtual do **Gepaci**. Sua função nessa etapa será para somente para orientar o usuário a entrar em contato com os canais de atendimento adequados.\n\n\n### 1. **Estilo de Atendimento**\n\n* Seja sempre **educada**, **objetiva**, **compreensiva** e **empática**.\n* Mantenha um tom **humanizado e acolhedor**.\n* Faça **apenas uma pergunta por vez**. Nunca sobrecarregue o cliente com múltiplas perguntas simultâneas.\n* **Nunca utilize informações externas** as orientações desse script\n\n### 2. **Início da Conversa**\n\n1. O atendimento já foi iniciado em outro momento e não foi possível localizar o colaborador com os dados informados.\n2. Você receberá direcionamento de usuários que não foram localizados na base ou de pessoas que nunca trabalharam na empresa.\n3. Para pessoas que não trabalham e nunca trabalharam na Icomon, informe que esse canal é exclusivo para funcionários e ex-funcionarios e encerre o atendimento de forma amigavel.\n4. Para funcionários que não foram localizados, informe que não poderá seguir com o atendimento por esse canal e oriente o mesmo a entrar em contato através do número: **0800-999-9999**.\n5. Após passar essas informações você pode se despedir e encerrar o atendimento.",
        "needsFallback": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        3168,
        720
      ],
      "id": "376c4c5a-c4cb-43ac-9a37-f2be3096d31d",
      "name": "AI Nao Localizado"
    },
    {
      "parameters": {
        "jsCode": "\nconst mensagem = $('coletar dados da conversa').first().json.message;\nconst onlyNumbers = mensagem\n  .replace(/\\D/g, '')\nconst result = [\n  {\n    messageOnlyNumbers: onlyNumbers\n  }\n];\n\nreturn result;\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1088,
        80
      ],
      "id": "8a12597d-a9cd-41c3-8156-02567a9e4784",
      "name": "Tratar somente Numeros",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "endpointUrl": "http://localhost:5678/mcp/8ffcb6c1-c5d4-4c3c-b0f2-26e844222cd2",
        "serverTransport": "sse",
        "options": {
          "timeout": 60000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        7104,
        80
      ],
      "id": "fca6cdef-e78c-4b0a-8408-f4232682e24b",
      "name": "MCP Client"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2704,
        1008
      ],
      "id": "86188932-15af-4d25-aabd-54d74937c56a",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "HIV493e91Mlq2ZRT",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini-2024-07-18",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini-2024-07-18"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3056,
        976
      ],
      "id": "4df9d094-0640-4202-ab5a-c5339ddbe36b",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "HIV493e91Mlq2ZRT",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        2768,
        864
      ],
      "id": "2f2ed3e1-3c04-4f63-a3fc-98a1238ae85d",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "htCf539ApNjfrbw8",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/webhook/identidade",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "json.chatInput",
              "value": "={{ $json.inputIdentity }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1744,
        64
      ],
      "id": "0d3f3bac-06bc-44e3-a8d4-df06302cb353",
      "name": "API Identidade",
      "alwaysOutputData": false,
      "retryOnFail": true,
      "maxTries": 2,
      "waitBetweenTries": 100,
      "executeOnce": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/webhook/icopass",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "tokenUser",
              "value": "={{ $json.inputToken }}"
            },
            {
              "name": "matricula",
              "value": "={{ $json.matricula }}"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          },
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2032,
        816
      ],
      "id": "e2b3254f-be29-4571-ba27-fa76816b89cd",
      "name": "API IcoPass",
      "alwaysOutputData": false,
      "retryOnFail": true,
      "maxTries": 2,
      "waitBetweenTries": 100,
      "executeOnce": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "description": "Contem informações para orientações ao usuário sobre serviços e benefícios ofertados pela empresa.",
        "topK": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Limit', `Você deve definir esse valor de acordo com o tamanho do retorno do banco vetorial para a pergunta realizada pelo usuário. `, 'number') }}"
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        2768,
        720
      ],
      "id": "ef8ae2d9-2c84-456f-b527-e1d968f580e3",
      "name": "Banco Verorial"
    },
    {
      "parameters": {
        "text": "**INSTRUÇÕES PARA COLETA TOKEN ICOPASS**\n\nSua função será orientar o usuário a informar o token para validação de identidade do funcionário usando o APP IcoPass. \n\n\n### 1. **Estilo de Atendimento**\n\n* Seja sempre **educada**, **objetiva**, **compreensiva** e **empática**.\n* Mantenha um tom **humanizado e acolhedor**.\n* Faça **apenas uma pergunta por vez**. Nunca sobrecarregue o cliente com múltiplas perguntas simultâneas.\n* **Nunca utilize informações externas** as orientações desse script\n\n### 1. **Solicitando o Token IcoPass**\n\n1. Informe o usuário que o para seguir com a solicitação desejada o mesmo deve validar sua identidade informando o **ICOMON Token** gerado no app IcoPass.\n2. O acesso no app deve ser feito utilizando o *usuário* e a *senha* de rede que o mesmo utiliza para acesso ao computador.\n3. Se a informação passada não atender aos requisitos, solicite os dados novamente.\n\n*Aguarde a resposta de cada pergunta antes de seguir para a próxima.*\n\n### 3. **Encerramento da Conversa**\n\nSe o colaborados não conseguir validar o token após duas tentativas, finalize a conversa chamando o Agent Tool **AI Nao Localizado**",
        "needsFallback": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        2336,
        720
      ],
      "id": "d499bcc2-7d7c-42a3-a43b-fedf79838c30",
      "name": "AI Acessos IcoPass"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $('coletar dados da conversa').item.json.session }}",
        "value": "acesso_icopass"
      },
      "type": "n8n-nodes-base.redisTool",
      "typeVersion": 1,
      "position": [
        2528,
        880
      ],
      "id": "a433e5db-0cf1-419c-aeed-46f52bf6aef1",
      "name": "Redis",
      "credentials": {
        "redis": {
          "id": "MgGckVnF4CAFHnor",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ec732077-a790-418b-a4f4-7fceeef216e2",
              "leftValue": "={{ $json.messageOnlyNumbers }}",
              "rightValue": "^[0-9]{6}$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1616,
        832
      ],
      "id": "cd2ab716-b0ca-4622-b710-56f7a3f624d5",
      "name": "If IcoPass"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9efad99d-7bde-414c-af1a-637e4d123fb5",
              "name": "inputToken",
              "value": "={{ $('Tratar somente Numeros1').item.json.messageOnlyNumbers }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1856,
        816
      ],
      "id": "ba43b19a-9d92-4a58-b2c5-f4d17f7e3ae2",
      "name": "coletar token",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "\nconst mensagem = $('coletar dados da conversa').first().json.message;\nconst onlyNumbers = mensagem\n  .replace(/\\D/g, '')\nconst result = [\n  {\n    messageOnlyNumbers: onlyNumbers\n  }\n];\n\nreturn result;\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1424,
        832
      ],
      "id": "4a990b73-3179-47ac-b9d0-675c245b9483",
      "name": "Tratar somente Numeros1",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    }
  ],
  "pinData": {
    "When clicking ‘Execute workflow’": [
      {
        "json": {
          "nome": "Daniel"
        }
      },
      {
        "json": {
          "nome2": "joe"
        }
      }
    ]
  },
  "connections": {
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Validar Usuario",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Atendimento",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Colaborador Não Encontrado",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI Nao Localizado",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Admissao": {
      "ai_tool": [
        []
      ]
    },
    "coletar identificador": {
      "main": [
        [
          {
            "node": "API Identidade",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "coletar dados usuario": {
      "main": [
        [
          {
            "node": "Setar Nome",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "coletar identificador",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Coletar Mensagem Verificacao",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Tratar número",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "Colaborador Não Encontrado",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "Atendimento",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "Validar Usuario",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "AI Nao Localizado",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Setar Status Inicial",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Status direcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "coletar dados da conversa": {
      "main": [
        [
          {
            "node": "Consultar Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Status direcionamento",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "coletar dados usuario",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tratar número": {
      "main": [
        [
          {
            "node": "coletar dados da conversa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Consultar Status": {
      "main": [
        [
          {
            "node": "Mensagem atual",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Status Inicial": {
      "main": [
        [
          {
            "node": "Sql Agtesla",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Status direcionamento": {
      "main": [
        [
          {
            "node": "Gerenciar direcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerenciar direcionamento": {
      "main": [
        [
          {
            "node": "Tratar somente Numeros",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Coletar Mensagem Nao Encontrado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Coletar Mensagem Atendimento",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Tratar somente Numeros1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Tratar somente Numeros",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Atendimento",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Validar Usuario",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "Colaborador Não Encontrado",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "AI Nao Localizado",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Mensagem atual": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atendimento": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Replace Me",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar Usuario": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Setar Status Nao Localizado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Setar Status Atendimento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Colaborador Não Encontrado": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coletar Mensagem Verificacao": {
      "main": [
        [
          {
            "node": "Validar Usuario",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coletar Mensagem Nao Encontrado": {
      "main": [
        [
          {
            "node": "Colaborador Não Encontrado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coletar Mensagem Atendimento": {
      "main": [
        [
          {
            "node": "Coletar Nome Usuario",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Status Atendimento": {
      "main": [
        [
          {
            "node": "Setar Nome1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Status Nao Localizado": {
      "main": [
        [
          {
            "node": "Gerenciar direcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Status Atendimento1": {
      "main": [
        [
          {
            "node": "Status direcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Nome": {
      "main": [
        [
          {
            "node": "Setar Status Atendimento1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Setar Nome2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Nome2": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        []
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Atendimento": {
      "ai_languageModel": [
        [
          {
            "node": "Validar Usuario",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "Colaborador Não Encontrado",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "Atendimento",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "AI Nao Localizado",
            "type": "ai_languageModel",
            "index": 1
          },
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Sql Agtesla": {
      "main": [
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Coletar Nome Usuario": {
      "main": [
        [
          {
            "node": "Atendimento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Setar Nome1": {
      "main": [
        [
          {
            "node": "Status direcionamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "coletar dados usuario1": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Atendimento": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call Auxilio Creche": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call Convenio Medico": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Frequencia1": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call Parcerias Beneficios": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call Seguro Vida": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Call Vale Transporte": {
      "ai_tool": [
        [
          {
            "node": "MCP Base de Conhecimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Nao Localizado": {
      "ai_tool": [
        [
          {
            "node": "Validar Usuario",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Tratar somente Numeros": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Banco Verorial",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_vectorStore": [
        [
          {
            "node": "Banco Verorial",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "API Identidade": {
      "main": [
        [
          {
            "node": "coletar dados usuario1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Banco Verorial": {
      "ai_tool": [
        [
          {
            "node": "Atendimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Acessos IcoPass": {
      "ai_tool": [
        [
          {
            "node": "Atendimento",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Redis": {
      "ai_tool": [
        [
          {
            "node": "AI Acessos IcoPass",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "If IcoPass": {
      "main": [
        [
          {
            "node": "coletar token",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tratar somente Numeros1": {
      "main": [
        [
          {
            "node": "If IcoPass",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "coletar token": {
      "main": [
        [
          {
            "node": "API IcoPass",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timezone": "America/Sao_Paulo",
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": -1,
    "availableInMCP": false
  },
  "versionId": "97d18aeb-2fab-47bb-a668-661e48037680",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e71ee30208579422913ee1673c6e68fb79d1e7e17d5c1deb0a672e043b70fb7c"
  },
  "id": "iTtlmnCbvGFaNTUv",
  "tags": [
    {
      "updatedAt": "2025-11-18T17:53:57.701Z",
      "createdAt": "2025-11-18T17:53:57.701Z",
      "id": "1B8R571k8L7Grfph",
      "name": "agentic-ai"
    },
    {
      "updatedAt": "2025-11-18T17:53:57.660Z",
      "createdAt": "2025-11-18T17:53:57.660Z",
      "id": "oeBmAL8MEImk87U7",
      "name": "mcp"
    },
    {
      "updatedAt": "2025-11-18T17:53:57.671Z",
      "createdAt": "2025-11-18T17:53:57.671Z",
      "id": "paH52iQOgZunA4KU",
      "name": "test"
    }
  ]
}